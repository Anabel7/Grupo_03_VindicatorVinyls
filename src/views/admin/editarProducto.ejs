<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agregar Producto</title>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <link rel="stylesheet" href="/css/styles.css" />
    <link rel="stylesheet" href="/css/agregarProducto.css" />
  </head>
  <body>
    <header><%- include('../partials/header') %></header>
    <div class="titulo-agregar">
      <h1>Editar Producto</h1>
    </div>
    <div class="errores2" style="color: red">
      <ul></ul>
    </div>
    <section class="admin-section">
      <div class="contenedor-form">
        <div class="imagenesCargadas">
          <img
            src="/img/products/<%= product.cover_path %>"
            alt="Portada álbum <%= product.product_title %>"
          />
        </div>

        <form
          class="formCargarDatos"
          action="/admin/editarProducto/<%=product.product_id%>?_method=PUT"
          method="POST"
          enctype="multipart/form-data"
        >
          <label for="disco">Título del disco:</label><br />
          <input
            type="text"
            id="disco"
            name="product_title"
            required
            value="<%=product.product_title%>"
          /><br />

          <label for="artista">Artista:</label><br />
          <select name="artist_name" id="artista">
            <% artists.forEach(artist => { %>
            <option <%= artist.artist_id === product.artist_id ? 'selected' : '' %>  value="<%= artist.artist_name %>">
              <%= artist.artist_name %>
            </option>
            <% }); %></select
          ><br />

          <label for="genero">Género:</label><br />
          <select name="genre_name" id="genero">
            <% genres.forEach(genre => { %>
            <option <%= genre.genre_id === product.genre_id ? 'selected' : '' %> value="<%= genre.genre_name %>">
              <%= genre.genre_name %>
            </option>
            <% }); %></select
          ><br />

          <label for="precio">Precio:</label><br />
          <input
            type="number"
            id="precio"
            name="price"
            value="<%=product.price%>"
          /><br />

          <label for="anio">Fecha de publicación original:</label><br />
          <input
            type="number"
            id="anio"
            min ="1800"
            max="2026"
            name="release_date"
            value="<%=product.release_date%>"
          /><br />

          <label for="descripcion">Descripción:</label><br />
          <textarea id="descripcion" name="product_info">
 <%= product.product_info %> </textarea
          ><br />

          <label for="stock">Stock disponible:</label><br />
          <input
            type="number"
            id="stock"
            name="stock"
            value="<%=product.stock%>"
          /><br />

          <label for="tracklist">Lista de Canciones: </label><br />
          <textarea name="tracklist" id="tracklist">
 <%= product.tracklist %></textarea
          ><br />

          <label for="discografica">Discográfica</label><br />
          <select name="label_name" id="discografica">
            <% labels.forEach(label => { %>
            <option <%= label.label_id === product.label_id ? 'selected' : '' %> value="<%= label.label_name %>">
              <%= label.label_name %>
            </option>
            <% }); %></select
          ><br />
          <input
            type="hidden"
            name="OldImagen"
            value="<%= product.cover_path%>"
          />
          <input type="file" name="cover_path" id="imagen" /><br />

          <input type="submit" value="Actualizar producto" /><br />
        </form>
      </div>
    </section>
    <div class="contenedor-boton-atras">
      <a href="/admin">
        <button class="regresar">
          <i class="fa-solid fa-arrow-left"></i>Volver atrás
        </button>
      </a>
    </div>
    <footer><%- include('../partials/footer') %></footer>
    <script src="/public/js/validatorPro.js"></script>
  </body>
</html>
